# 功能模块

## 项目主题

### 🎯 核心定位
**家庭菜馆社交点餐系统**
- 记录家庭拿手菜
- 朋友聚会时分享链接直接点菜
- 主人接收订单、准备菜品

### 🌶️ 菜系主题

| 主题 | 菜系 | 主题色 | 风格 |
|------|------|--------|------|
| 川菜 | 麻辣、鲜香 | 🔴 红色 | 热情、火辣 |
| 傣味 | 酸辣、清新 | 🟢 绿色 | 自然、清爽 |

### 👥 目标用户
- **主人**: 记录菜品、管理订单
- **客人**: 浏览菜单、点餐下单

---

## 认证模块 (auth)

### 功能列表
- [x] 用户注册 (sign-up)
- [x] 用户登录 (sign-in)
- [x] 忘记密码 (forgot-password)
- [x] 密码修改 (change-password)
- [x] 会话管理 (Lucia)
- [x] 多语言支持

### 技术实现
- **密码加密**: Argon2 (@node-rs/argon2)
- **会话**: Lucia Auth v3 + Prisma Adapter
- **验证**: Zod

## 菜品模块 (dish)

### 功能列表
- [ ] 菜品列表浏览
- [ ] 菜品详情
- [ ] 菜品收藏
- [ ] 菜品分类筛选
- [ ] 搜索功能

### 菜品分类
| 分类 | 说明 |
|------|------|
| APPETIZER | 开胃菜 |
| MAIN_COURSE | 主菜 |
| SOUP | 汤品 |
| DESSERT | 甜点 |
| BEVERAGE | 饮品 |

## 照片模块 (photo)

### 功能列表
- [x] 照片列表
- [x] 照片详情
- [x] 照片上传
- [x] 照片收藏
- [x] 照片评论
- [ ] 聚会管理 (Gathering)

### 照片属性
- **多尺寸**: 原图 / 中等图 / 缩略图
- **情绪标签**: HAPPY / EXCITED / WARM / NOSTALGIC / FUNNY
- **存储**: 腾讯云 COS

### 上传流程
```
客户端 → POST /api/photos/upload-image → COS → 返回 URL → 保存 Photo 记录
```

## 用户模块 (profile)

### 功能列表
- [x] 个人资料展示
- [x] 头像修改
- [x] 昵称修改
- [ ] 个人简介编辑
- [ ] 生日设置
- [ ] 性别设置

## 国际化 (i18n)

### 支持语言
- **zh** - 中文 (默认)
- **en** - 英文

### 配置位置
- `messages/zh.json` - 中文文案
- `messages/en.json` - 英文文案
- `src/i18n/request.ts` - 请求处理

## 主题与 UI

### 暗色模式
- 支持 next-themes
- 持久化存储

### 语言切换
- 支持实时切换
- 自动检测系统语言

## 待开发功能

| 功能 | 优先级 | 说明 |
|------|--------|------|
| **点餐系统** | 🔴 高 | 分享链接 → 客人点菜 → 主人接收 |
| **订单管理** | 🔴 高 | 订单状态、统计、通知 |
| **聚会管理** | 🟡 中 | 创建聚会、邀请码 |
| **菜单分享** | 🔴 高 | 生成分享链接、二维码 |
| **购物车** | 🔴 高 | 添加/删除/结算 |
| **地址管理** | 🟡 中 | 收货地址 CRUD |
| **评论系统** | 🟡 中 | 菜品评论、照片评论 |
| **消息通知** | 🟢 低 | 订单/评论通知 |
| **优惠券** | 🟢 低 | 优惠券发放和使用 |
