# portal-chuan-dai-h5 功能清单

## 项目概述

**定位**: 家庭菜馆点餐系统 - 朋友聚会时分享网址，直接点菜下单

**主题**: 川菜 + 傣味 (红色/绿色主题)

---

## 已完成功能

### 1. 用户系统

| 功能 | 状态 | 说明 |
|------|------|------|
| 注册 | ✅ | 账号/密码注册 |
| 登录 | ✅ | 密码登录 |
| 忘记密码 | ✅ | - |
| 修改密码 | ✅ | - |
| 退出登录 | ✅ | - |
| 个人资料编辑 | ✅ | 昵称、性别、生日、简介 |
| 头像设置 | ⏳ | 待接入上传功能 |

### 2. 菜单系统

| 功能 | 状态 | 说明 |
|------|------|------|
| 菜品浏览 | ✅ | 虚拟滚动，性能优化 |
| 分类筛选 | ✅ | 全部/开胃菜/主菜/汤品/甜点/饮品 |
| 菜品详情 | ✅ | 点击弹出详情 |
| 数量选择 | ✅ | 1-10 数量选择 |
| 备注功能 | ✅ | 支持输入特殊要求 |
| 收藏菜品 | ✅ | 本地状态 |
| 主题色区分 | ✅ | 川菜红色 / 傣味绿色 |

### 3. 购物车

| 功能 | 状态 | 说明 |
|------|------|------|
| 添加菜品 | ✅ | 支持数量和备注 |
| 查看购物车 | ✅ | 浮动面板展示 |
| 修改数量 | ✅ | +/- 按钮 |
| 删除菜品 | ✅ | - |
| 清空购物车 | ✅ | - |
| 实时总价 | ✅ | Zustand 状态管理 |

### 4. 订单系统

| 功能 | 状态 | 说明 |
|------|------|------|
| 提交订单 | ✅ | 生成订单号 |
| 订单列表 | ✅ | 待处理/全部订单 |
| 订单详情 | ✅ | 菜品列表、备注、总价 |
| 订单状态 | ✅ | 待处理/已确认/已完成/已取消 |
| 取消订单 | ✅ | - |
| 确认接单 | ✅ | - |
| 完成订单 | ✅ | - |

### 5. 照片墙

| 功能 | 状态 | 说明 |
|------|------|------|
| 照片列表 | ✅ | Masonry 布局 |
| 照片详情 | ✅ | - |
| 上传照片 | ✅ | 腾讯云 COS |
| 点赞收藏 | ✅ | - |
| 评论功能 | ✅ | - |
| 情绪标签 | ✅ | HAPPY/EXCITED/WARM/NOSTALGIC/FUNNY |

### 6. 其他

| 功能 | 状态 | 说明 |
|------|------|------|
| 多语言 | ✅ | 中文/英文 |
| 深色模式 | ✅ | next-themes |
| 响应式设计 | ✅ | 移动端优先 |

---

## 技术栈

| 分类 | 技术 |
|------|------|
| 框架 | Next.js 16 + React 19 |
| 语言 | TypeScript 5 |
| 样式 | Tailwind CSS 4 |
| 状态管理 | Zustand |
| 认证 | Lucia Auth + Argon2 |
| 数据库 | PostgreSQL + Prisma |
| 图片存储 | 腾讯云 COS |
| 国际化 | next-intl |
| UI 组件 | shadcn/ui (CVA, clsx) |

---

## 项目结构

```
src/
├── app/[locale]/
│   ├── home/           # 首页
│   ├── menu/           # 菜单页
│   ├── orders/         # 订单列表
│   │   └── [id]/       # 订单详情
│   ├── photo/          # 照片墙
│   │   ├── upload/     # 上传照片
│   │   └── [id]/       # 照片详情
│   ├── profile/        # 个人中心
│   │   ├── change-password/  # 修改密码
│   │   └── edit-profile/     # 编辑资料
│   ├── sign-in/        # 登录
│   └── sign-up/        # 注册
├── features/
│   ├── auth/           # 认证模块
│   ├── dish/           # 菜品模块
│   ├── cart/           # 购物车
│   ├── order/          # 订单模块
│   └── photo/          # 照片模块
├── components/         # 公共组件
├── hooks/              # 自定义 Hooks
├── lib/                # 工具库
├── stores/             # Zustand 状态
└── types/              # 类型定义
```

---

## 待开发功能

### 高优先级

| 功能 | 描述 |
|------|------|
| 菜品管理后台 | 增删改查菜品 |
| 订单推送通知 | 微信/短信通知主人 |
| 分享链接 | 一键分享菜单链接 |

### 中优先级

| 功能 | 描述 |
|------|------|
| 菜品搜索 | 按名称搜索 |
| 热门推荐 | 基于历史订单推荐 |
| 订单统计 | 金额统计、菜品排行 |

### 低优先级

| 功能 | 描述 |
|------|------|
| 优惠券 | 优惠券发放和使用 |
| 微信分享 | 分享到微信 |
| 消息通知 | 系统消息 |

---

## 数据库模型

### 用户模块
- User - 用户信息
- Session - 登录会话

### 菜品模块
- Dish - 菜品
- Favorite - 收藏

### 订单模块
- Order - 订单
- OrderItem - 订单明细

### 照片模块
- Photo - 照片
- PhotoFavorite - 照片收藏
- PhotoComment - 照片评论
- Gathering - 聚会（预留）

---

## 页面路径

| 页面 | 路径 |
|------|------|
| 首页 | /zh/home |
| 菜单 | /zh/menu |
| 订单列表 | /zh/orders |
| 订单详情 | /zh/orders/[id] |
| 照片墙 | /zh/photo |
| 上传照片 | /zh/photo/upload |
| 登录 | /zh/sign-in |
| 注册 | /zh/sign-up |
| 个人中心 | /zh/profile |
| 编辑资料 | /zh/profile/edit-profile |
| 修改密码 | /zh/profile/change-password |

---

*最后更新: 2026-01-31*
