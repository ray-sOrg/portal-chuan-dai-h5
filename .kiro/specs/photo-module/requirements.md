# 照片模块需求文档

## 简介

照片模块是一个用于展示、上传和管理聚会照片的功能模块。用户可以浏览瀑布流照片、查看详情、收藏照片、上传新照片以及评论互动。

## 术语表

- **Photo（照片）**: 用户上传的图片，包含标题、描述、所属聚会等信息
- **Waterfall（瀑布流）**: 照片的展示布局方式，类似 Pinterest 风格
- **Gathering（聚会）**: 照片所属的活动/聚会
- **Emotion Tag（情绪标签）**: 用于标记照片情绪的可选标签

## 需求

### 需求 1：照片瀑布流展示

**用户故事：** 作为用户，我希望在照片页面看到瀑布流布局的照片列表，以便快速浏览所有照片。

#### 验收标准

1. WHEN 用户访问照片页面 THEN 系统 SHALL 以瀑布流布局展示所有照片
2. WHEN 照片列表加载完成 THEN 系统 SHALL 按时间倒序排列照片
3. WHEN 展示照片卡片 THEN 系统 SHALL 显示照片标题和简短描述（超出省略）
4. WHEN 用户滚动到页面底部 THEN 系统 SHALL 懒加载更多照片

### 需求 2：照片收藏功能

**用户故事：** 作为登录用户，我希望能收藏喜欢的照片，以便后续快速找到。

#### 验收标准

1. WHEN 展示照片卡片 THEN 系统 SHALL 在右下角显示爱心收藏按钮
2. WHEN 登录用户点击收藏按钮 THEN 系统 SHALL 切换该照片的收藏状态
3. WHEN 未登录用户点击收藏按钮 THEN 系统 SHALL 跳转到登录页面

### 需求 3：照片上传入口

**用户故事：** 作为用户，我希望能方便地上传照片，以便分享聚会回忆。

#### 验收标准

1. WHEN 用户在照片页面 THEN 系统 SHALL 在底部固定显示「上传照片」按钮
2. WHEN 登录用户点击上传按钮 THEN 系统 SHALL 跳转到照片上传页面
3. WHEN 未登录用户点击上传按钮 THEN 系统 SHALL 跳转到登录页面

### 需求 4：照片详情页

**用户故事：** 作为用户，我希望点击照片后能查看完整详情，以便了解照片的完整信息。

#### 验收标准

1. WHEN 用户点击照片卡片 THEN 系统 SHALL 跳转到照片详情页
2. WHEN 展示照片详情 THEN 系统 SHALL 显示大图、完整标题和描述
3. WHEN 照片有所属聚会 THEN 系统 SHALL 显示聚会信息
4. WHEN 展示照片详情 THEN 系统 SHALL 显示照片上传时间
5. WHEN 登录用户在详情页 THEN 系统 SHALL 允许收藏/取消收藏操作

### 需求 5：照片评论功能

**用户故事：** 作为登录用户，我希望能对照片进行评论，以便与其他用户互动。

#### 验收标准

1. WHEN 展示照片详情 THEN 系统 SHALL 显示评论列表
2. WHEN 登录用户提交评论 THEN 系统 SHALL 将评论添加到列表
3. WHEN 未登录用户尝试评论 THEN 系统 SHALL 提示用户登录

### 需求 6：照片上传功能

**用户故事：** 作为登录用户，我希望能上传照片并填写相关信息，以便分享聚会照片。

#### 验收标准

1. WHEN 用户进入上传页面 THEN 系统 SHALL 允许选择单张或多张照片
2. WHEN 用户选择照片后 THEN 系统 SHALL 显示照片预览
3. WHEN 用户填写信息 THEN 系统 SHALL 提供标题、描述、所属聚会、情绪标签字段
4. WHEN 情绪标签字段 THEN 系统 SHALL 设置为非必填
5. WHEN 用户提交上传 THEN 系统 SHALL 压缩图片并生成多尺寸版本
6. WHEN 上传成功 THEN 系统 SHALL 引导用户查看照片详情

---

## 任务清单（按优先级）

### MVP 必做

- [ ] 照片瀑布流页面（基础布局）
- [ ] 照片卡片组件（标题、描述、收藏按钮）
- [ ] 照片详情页（大图、完整信息）
- [ ] 收藏功能（登录校验）
- [ ] 底部上传按钮（登录校验）
- [ ] 照片上传页面（单张/多张）
- [ ] 评论列表展示
- [ ] 新增评论功能

### 进阶功能

- [ ] 瀑布流懒加载
- [ ] 图片压缩 & 多尺寸
- [ ] 评论实时刷新或轮询
- [ ] 时间分组展示（如：2025-02、某次聚会）
- [ ] 按聚会筛选照片
